package com.zyrtec.kiteflying{	import com.bigspaceship.utils.Environment;	import com.bigspaceship.utils.Out;	import com.zyrtec.interfaces.IMiniGame;	import com.zyrtec.kiteflying.controller.KiteFlyingMain;	import com.zyrtec.kiteflying.model.KFModel;	import com.zyrtec.kiteflying.model.vo.KFGameData;	import com.zyrtec.kiteflying.view.screens.KFGameOver;	import com.zyrtec.model.vo.MiniGameData;		import flash.display.MovieClip;	import flash.media.SoundTransform;		import net.ored.util.ORedUtils;
		[SWF(width="960", height="600", frameRate="30")]	public class KiteFlyingApp extends MovieClip implements IMiniGame	{				private var _m						:KFModel;//model		private var _gc						:KiteFlyingMain;//game controller				//sound		private var _muteSoundTransform		:SoundTransform = new SoundTransform();		private var _soundMute				:Boolean = false;				//debug		private var _d						:DebugSlidersMC;				// =================================================		// ================ @Interfaced		// =================================================				//to be called from parent		public function initMiniGame(									 $completecallback:Function, 									 //$trackingcallback:Function, 									 $leaderboardcallback:Function, 									 $logincallback:Function, 									 $signincallback:Function, 									 $gamedata:Object):void{						_m					= KFModel.getInstance();			_m.initialize(this.stage);			_m.setGameData(new KFGameData($gamedata));			//oc: all shell calls go through the shell adapter via the model.			_m.shell.initialize(										$completecallback, 									//$trackingcallback, 									$leaderboardcallback, 									$logincallback,									$signincallback								); 						_m.shell.app = this;			//add Game			_gc	= new KiteFlyingMain();//main game controller			_gc.init();			_gc.visible 	= true;			_gc.frameRate 	= 31; //independent from movie frame rate			addChild(_gc);			_gc.startTimer(); ///// START GAMING RUNNING HERE !!!! ////			//oc: debug			//_d		= new DebugSlidersMC();			//_d.x 	= KFModel.SWF_WIDTH- _d.width; 			//addChild(_d);					}//end function				public function getScore():Object{ return _m.scoreToSend;}		public function setGameData($o:Object):void{						_m.setGameData(new KFGameData($o));			KFGameOver(_gc.gameOverScreen).disableLogInSignUp();			_gc.updateLeaderboard();		}		public function muteGame($b:Boolean):void		{			if (!$b) {				_soundMute=false;				_muteSoundTransform.volume=1;				flash.media.SoundMixer.soundTransform=_muteSoundTransform;			} else {				_muteSoundTransform.volume=0;				_soundMute = true;				flash.media.SoundMixer.soundTransform=_muteSoundTransform;			}		}		public function gameQuit():Boolean{							_gc.destroy();			return true;				}		public function gamePause($b:Boolean):void{ 					if($b) muteGame($b);			_m.pause();			}		public function setLeaderBoard($o:Object):void{			Out.status(this, "setLeaderboard");			_m.leaderboardResults = $o;		}		// =================================================		// ================ @Core Handler		// =================================================				// =================================================		// ================ @Overrides		// =================================================				// =================================================		// ================ @Constructor		// =================================================				public function KiteFlyingApp()		{			//ORedUtils.turnOutOn();			Out.info(this, "Welcome to KiteFlyingApp on :"+Environment.DOMAIN);			Out.debug(this, "awaiting initMiniGame like a future europe traveler who missed his flight, this is definitely definitely definitely definitely a new kite swf");						var o:Object = {badgeURL:"assets/images/HighFlyer.jpg", highScore:"12000"};/*			initMiniGame(	new Function(), 	//complete							//new Function(), 	//tracking							new Function(),		//leaderboard							new Function(), 	//signin							new Function(),		//login							new KFGameData(o)//gamedata			);*/					}//end constructor	}//end class}//end package